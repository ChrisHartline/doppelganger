<mxfile host="app.diagrams.net" modified="2024-01-28T00:00:00.000Z" agent="Claude" version="1.0">
  <diagram name="AI Doppelganger Architecture" id="doppelganger-arch">
    <mxGraphModel dx="1200" dy="800" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="1100" pageHeight="850" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />

        <!-- Title -->
        <mxCell id="title" value="AI Doppelganger - System Architecture" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=20;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="350" y="20" width="400" height="40" as="geometry" />
        </mxCell>

        <!-- Frontend Box -->
        <mxCell id="frontend-box" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;" vertex="1" parent="1">
          <mxGeometry x="40" y="80" width="200" height="280" as="geometry" />
        </mxCell>
        <mxCell id="frontend-title" value="Frontend&#xa;(React + Vite + shadcn)" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="60" y="90" width="160" height="40" as="geometry" />
        </mxCell>
        <mxCell id="chat-ui" value="Chat Interface" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;" vertex="1" parent="1">
          <mxGeometry x="60" y="140" width="160" height="40" as="geometry" />
        </mxCell>
        <mxCell id="avatar-ui" value="Avatar Display&#xa;(D-ID Video)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;" vertex="1" parent="1">
          <mxGeometry x="60" y="190" width="160" height="40" as="geometry" />
        </mxCell>
        <mxCell id="qual-ui" value="Qualification&#xa;Progress" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;" vertex="1" parent="1">
          <mxGeometry x="60" y="240" width="160" height="40" as="geometry" />
        </mxCell>
        <mxCell id="booking-ui" value="Appointment&#xa;Booking" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;" vertex="1" parent="1">
          <mxGeometry x="60" y="290" width="160" height="40" as="geometry" />
        </mxCell>

        <!-- Backend Box -->
        <mxCell id="backend-box" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;" vertex="1" parent="1">
          <mxGeometry x="300" y="80" width="240" height="400" as="geometry" />
        </mxCell>
        <mxCell id="backend-title" value="Backend&#xa;(Express + TypeScript)" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="340" y="90" width="160" height="40" as="geometry" />
        </mxCell>
        <mxCell id="chat-route" value="/api/chat" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;" vertex="1" parent="1">
          <mxGeometry x="320" y="140" width="100" height="30" as="geometry" />
        </mxCell>
        <mxCell id="video-route" value="/api/video" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;" vertex="1" parent="1">
          <mxGeometry x="420" y="140" width="100" height="30" as="geometry" />
        </mxCell>
        <mxCell id="calendar-route" value="/api/calendar" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;" vertex="1" parent="1">
          <mxGeometry x="320" y="180" width="100" height="30" as="geometry" />
        </mxCell>
        <mxCell id="logs-route" value="/api/logs" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;" vertex="1" parent="1">
          <mxGeometry x="420" y="180" width="100" height="30" as="geometry" />
        </mxCell>

        <mxCell id="llm-service" value="LLM Service&#xa;(System Prompt + Q&amp;A)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;" vertex="1" parent="1">
          <mxGeometry x="320" y="230" width="200" height="50" as="geometry" />
        </mxCell>
        <mxCell id="knowledge-service" value="Knowledge Service&#xa;(Resume, Skills, Contacts)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;" vertex="1" parent="1">
          <mxGeometry x="320" y="290" width="200" height="50" as="geometry" />
        </mxCell>
        <mxCell id="did-service" value="D-ID Service" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;" vertex="1" parent="1">
          <mxGeometry x="320" y="350" width="95" height="40" as="geometry" />
        </mxCell>
        <mxCell id="nylas-service" value="Nylas Service" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;" vertex="1" parent="1">
          <mxGeometry x="425" y="350" width="95" height="40" as="geometry" />
        </mxCell>
        <mxCell id="log-service" value="Conversation Log Service" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;" vertex="1" parent="1">
          <mxGeometry x="320" y="400" width="200" height="40" as="geometry" />
        </mxCell>

        <!-- Knowledge Base Box -->
        <mxCell id="knowledge-box" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffe6cc;strokeColor=#d79b00;" vertex="1" parent="1">
          <mxGeometry x="300" y="500" width="240" height="180" as="geometry" />
        </mxCell>
        <mxCell id="knowledge-title" value="Knowledge Base&#xa;(/knowledge)" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="340" y="510" width="160" height="40" as="geometry" />
        </mxCell>
        <mxCell id="resume-file" value="resume.txt" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#fff;strokeColor=#d79b00;" vertex="1" parent="1">
          <mxGeometry x="320" y="555" width="80" height="25" as="geometry" />
        </mxCell>
        <mxCell id="qa-file" value="qa.json" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#fff;strokeColor=#d79b00;" vertex="1" parent="1">
          <mxGeometry x="410" y="555" width="80" height="25" as="geometry" />
        </mxCell>
        <mxCell id="personality-file" value="personality.json" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#fff;strokeColor=#d79b00;" vertex="1" parent="1">
          <mxGeometry x="320" y="590" width="80" height="25" as="geometry" />
        </mxCell>
        <mxCell id="boundaries-file" value="hard_boundaries.json" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#fff;strokeColor=#d79b00;" vertex="1" parent="1">
          <mxGeometry x="410" y="590" width="110" height="25" as="geometry" />
        </mxCell>
        <mxCell id="contacts-file" value="contacts.json" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#fff;strokeColor=#d79b00;" vertex="1" parent="1">
          <mxGeometry x="320" y="625" width="80" height="25" as="geometry" />
        </mxCell>
        <mxCell id="skills-file" value="skills.json" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#fff;strokeColor=#d79b00;" vertex="1" parent="1">
          <mxGeometry x="410" y="625" width="80" height="25" as="geometry" />
        </mxCell>

        <!-- External Services -->
        <mxCell id="external-box" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f5f5f5;strokeColor=#666666;" vertex="1" parent="1">
          <mxGeometry x="600" y="80" width="200" height="280" as="geometry" />
        </mxCell>
        <mxCell id="external-title" value="External Services" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="640" y="90" width="120" height="30" as="geometry" />
        </mxCell>
        <mxCell id="modal-service" value="Modal&#xa;(TinyLlama LLM)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#b0e3e6;strokeColor=#0e8088;" vertex="1" parent="1">
          <mxGeometry x="620" y="130" width="160" height="50" as="geometry" />
        </mxCell>
        <mxCell id="did-external" value="D-ID API&#xa;(Lip-sync Video)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#b0e3e6;strokeColor=#0e8088;" vertex="1" parent="1">
          <mxGeometry x="620" y="190" width="160" height="50" as="geometry" />
        </mxCell>
        <mxCell id="elevenlabs-external" value="ElevenLabs&#xa;(Voice - via D-ID)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#b0e3e6;strokeColor=#0e8088;" vertex="1" parent="1">
          <mxGeometry x="620" y="250" width="160" height="50" as="geometry" />
        </mxCell>
        <mxCell id="nylas-external" value="Nylas API&#xa;(Gmail/Calendar)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#b0e3e6;strokeColor=#0e8088;" vertex="1" parent="1">
          <mxGeometry x="620" y="310" width="160" height="50" as="geometry" />
        </mxCell>

        <!-- Logs Box -->
        <mxCell id="logs-box" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f5f5f5;strokeColor=#666666;" vertex="1" parent="1">
          <mxGeometry x="600" y="400" width="200" height="100" as="geometry" />
        </mxCell>
        <mxCell id="logs-title" value="Conversation Logs&#xa;(/backend/logs)" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="620" y="410" width="160" height="40" as="geometry" />
        </mxCell>
        <mxCell id="conv-file" value="conversations.json" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#fff;strokeColor=#666666;" vertex="1" parent="1">
          <mxGeometry x="640" y="455" width="120" height="30" as="geometry" />
        </mxCell>

        <!-- Arrows -->
        <mxCell id="arrow1" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="chat-ui" target="chat-route">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="arrow2" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="llm-service" target="modal-service">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="arrow3" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="did-service" target="did-external">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="arrow4" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="nylas-service" target="nylas-external">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="arrow5" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="knowledge-service" target="knowledge-box">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="arrow6" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="log-service" target="logs-box">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>

        <!-- Legend -->
        <mxCell id="legend-box" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff;strokeColor=#000;" vertex="1" parent="1">
          <mxGeometry x="40" y="400" width="200" height="180" as="geometry" />
        </mxCell>
        <mxCell id="legend-title" value="Data Flow" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="100" y="405" width="80" height="20" as="geometry" />
        </mxCell>
        <mxCell id="flow1" value="1. User sends message" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=10" vertex="1" parent="1">
          <mxGeometry x="50" y="430" width="180" height="20" as="geometry" />
        </mxCell>
        <mxCell id="flow2" value="2. Backend loads knowledge" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=10" vertex="1" parent="1">
          <mxGeometry x="50" y="450" width="180" height="20" as="geometry" />
        </mxCell>
        <mxCell id="flow3" value="3. LLM generates response" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=10" vertex="1" parent="1">
          <mxGeometry x="50" y="470" width="180" height="20" as="geometry" />
        </mxCell>
        <mxCell id="flow4" value="4. D-ID creates lip-sync video" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=10" vertex="1" parent="1">
          <mxGeometry x="50" y="490" width="180" height="20" as="geometry" />
        </mxCell>
        <mxCell id="flow5" value="5. Conversation logged" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=10" vertex="1" parent="1">
          <mxGeometry x="50" y="510" width="180" height="20" as="geometry" />
        </mxCell>
        <mxCell id="flow6" value="6. Qualified? â†’ Book via Nylas" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=10" vertex="1" parent="1">
          <mxGeometry x="50" y="530" width="180" height="20" as="geometry" />
        </mxCell>
        <mxCell id="flow7" value="7. Email notification to Chris" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=10" vertex="1" parent="1">
          <mxGeometry x="50" y="550" width="180" height="20" as="geometry" />
        </mxCell>

      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
